<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Flask-Mp3Player-Sample</title>
    <meta name="description" content="Flask-Mp3Player-Sample">
    <meta name="author" content="YA-androidapp(https://github.com/YA-androidapp)">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <form id="loginform" action="/login" method="post">
        <input type="text" id="email" name="email" value="ya.androidapp@gmail.com"><br>
        <input type="password" id="password" name="password" value="PASSWORD"><br>
        <input type="submit" id="submit" value="submit" />
    </form>
    <script>
        window.addEventListener('load', function () {
            document.cookie = 'token=';

            document.getElementById('loginform').onsubmit = () => {
                retrieve_token();
            };
        }, false);
        function retrieve_token() {
            var json = {};
            json.email = document.getElementById('email').value;
            json.password = document.getElementById('password').value;

            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/auth/token', false); // async=false
            xhr.onload = () => {
                token = JSON.parse(xhr.response)["access_token"];
                document.cookie = 'token=' + token;
            };
            xhr.setRequestHeader('Content-Type', 'application/json');
            // xhr.responseType = 'json';
            xhr.send(JSON.stringify(json));
        }
    </script>
</body>

</html><!-- Copyright (c) 2019 YA-androidapp(https://github.com/YA-androidapp) All rights reserved. -->